(function(){"use strict";var n={options:{urls:{},messages:App.str.text("Messages"),strings:App.str.text("StringContents")},values:{},events:{defaults:{initialize:{},getParameters:{},initializeControl:{},initializeControlEvent:{},loadMasterData:{},loadData:{},loadDialogs:{},createValidator:{},validateAll:{},transfer:{}}},operations:{defaults:{}},loginForm:{options:{urls:{},validations:{},bindOption:{}},values:{},events:{defaults:{initialize:{},createFilter:{},change:{}}},operations:{defaults:{search:{}}}},dialogs:{}};n.events.defaults.initialize=function(){var t=$.Deferred();return n.notify=App.ui.page.notify(),App.ui.loading.show(),n.events.defaults.getParameters(),n.events.defaults.initializeControl(),n.events.defaults.initializeControlEvent(),n.loginForm.events.defaults.initialize(),n.events.defaults.loadMasterData().then(function(){return n.events.defaults.loadData()}).then(function(){return n.events.defaults.loadDialogs()}).then(function(){}).fail(function(t){App.ui.page.normalizeError(t).forEach(function(t){n.notify.alert.message(t.message).show()})}).always(function(){$(":input:visible:not(:disabled):first").focus();App.ui.loading.close();t.resolve()}),t.promise()};n.events.defaults.getParameters=function(){};n.events.defaults.initializeControl=function(){};n.events.defaults.initializeControlEvent=function(){App.ui.page.applyCollapsePanel()};n.events.defaults.loadMasterData=function(){return App.async.all({}).then(function(n){var t=n.successes})};n.events.defaults.loadData=function(){return App.async.success()};n.events.defaults.loadDialogs=function(){return App.async.all({}).then(function(){})};n.events.defaults.createValidator=function(t,i){return n.events.defaults.validationSuccess=n.events.defaults.validationSuccess||App.ui.page.validationSuccess(n.notify),n.events.defaults.validationFail=n.events.defaults.validationFail||App.ui.page.validationFail(n.notify),n.events.defaults.validationAlways=n.events.defaults.validationAlways||App.ui.page.validationAlways(n.notify),App.validation(t,i||{success:n.events.defaults.validationSuccess,fail:n.events.defaults.validationFail,always:n.events.defaults.validationAlways})};n.events.defaults.validateAll=function(){var t=[];return t.push(n.loginForm.validator.validate()),App.async.all(t)};n.loginForm.options.validations={userName:{rules:{required:!0},options:{name:n.options.strings.UserName},messages:{required:n.options.messages.Required}},password:{rules:{required:!0},options:{name:n.options.strings.Password},messages:{required:n.options.messages.Required}}};n.loginForm.options.bindOption={appliers:{},converters:{}};n.loginForm.events.defaults.initialize=function(){var r=$.Deferred(),t=$(".main"),i;n.loginForm.validator=t.validation(n.events.defaults.createValidator(n.loginForm.options.validations),{immediate:!0});n.loginForm.element=t;App.ui.page.applyInput(t);i=$(".commands");i.on("click","#login",n.loginForm.operations.defaults.login);return errorMessage.length>0&&n.notify.alert.message(errorMessage).show(),r.promise()};n.loginForm.events.defaults.change=function(){};n.loginForm.operations.defaults.login=function(t){return t.preventDefault(),t.stopImmediatePropagation(),n.loginForm.validator.validate().then(function(){$("#mainform").submit()}),!1};$(document).ready(function(){App.page.mode==="test"?App.page.test.run=function(){n.events.defaults.initialize().then(function(){jasmine.getGlobal().page=n;jasmine.getEnv().execute()})}:n.events.defaults.initialize()});App.ui.page.extend(n)})();
//# sourceMappingURL=Login.min.js.map
