!function(e,i,t){"use strict";var n=App.define("App.ui.portalmenu",{setting:{},isShowed:!1,context:{},settings:function(e,i){n.settingsObj={title:e,setting:i}},settingsObj:{},setup:function(e,t,l,s){var p=l.replace(/\/$/,"");n.setting=s||{setting:[],title:""},e=App.ifUndefOrNull(e,[]);var r=o(n.setting.setting||[],1001,e,p);i(t).append(r)}});App.define("App.ui.breadcrumb",{setup:function(e,t,n,s){var n=n.replace(/\/$/,"");s=s||{setting:[],title:""},e=App.ifUndefOrNull(e,[]);var p=l(s.setting||[],e,n);i(t).append(p)}});var l=function(e,i,t){var n,l,p,r=App.uri.parse(location.href).path||"",a=document.createDocumentFragment();t&&(App.str.startsWith(t,"/")||(t+="/"+t),App.str.startsWith(r,t)&&(r=r.substr(0,t.length)));var o=[];for(n=0,l=e.length;l>n;n++){var p=e[n];s(p,r,o)}return o.forEach(function(e){var i=document.createElement("li");i.appendChild(document.createTextNode(e)),a.appendChild(i)}),a},s=function(e,i,t){var n,l,p,r=e.items||[];for(n=0,l=r.length;l>n;n++){var p=r[n];p&&App.str.startsWith(i,p.path)&&(e.display&&0===n&&t.push(e.display),p.url?i===p.path+"/page/"+(p.url+"").split("?")[0]&&t.push(p.display):s(p,i,t))}},p={open:"glyphicon glyphicon-chevron-down",close:"glyphicon glyphicon-chevron-left",folder:"glyphicon glyphicon-list-alt"},r={folder:'<i class="'+p.folder+'"></i>',collapse:'<i class="icon-collapse pull-right '+p.open+'"></i>'},a=function(e,i){var t,n,l,s,p,r=!1;if(!e.visible)return!0;if(App.isStr(e.visible)&&"*"!==e.visible&&e.visible!==i)return r;if(App.isArray(e.visible)){for(t=0,n=e.visible.length;n>t;t++)for(l=0,s=i.length;s>l;l++)if(p=i[l],e.visible[t]===p)return!0;return!1}return App.isFunc(e.visible)?e.visible(i):!0},o=function(e,t,n,l){var s,p,r=i('<div class="datalist"><div class="row"></div></div>'),a=r.find(".row");for(s=0;s<e.length;s++){p=e[s];var o=i("<div class='col-sm-3'><div class='datalist-item' style='overflow: hidden;'><span style='white-space:nowrap;'>"+p.display+"</span><hr style='margin-top: .5em; margin-bottom: .5em;'/><div class='datalist-item-body' style='height:130px; overflow-y:auto; overflow-x:hidden; white-space:nowrap;'></div></div></div>"),c=i('<ul class="menu-child"></ul>');d(c,p.items,t,n,l,!0),o.find(".datalist-item-body").append(c),a.append(o)}return r},d=function(e,t,n,l,s,p){var o,c,u,h,v,f,g;for(h=0,v=t.length;v>h;h++)if(f=t[h],a(f,l)){if(g=f.url&&f.path?s+f.path+"/page/"+f.url:"#",o=i('<li href="'+g+'"></li>'),c=i('<a href="'+g+'" class="menu-item">'+f.display+"</a>"),App.isFunc(f.load)&&f.load(c),App.isFunc(f.click)&&c.on("click",f.click),u=i("<div></div>"),f.items&&f.items.length){u.append(c).appendTo(o),c.prepend(r.folder);var m=i('<ul class="menu-child"></ul>');o.append(m),p&&d(m,f.items,n,l,s,!0)}else f.url&&u.append(c).appendTo(o);e.append(o)}return e}}(this,jQuery);